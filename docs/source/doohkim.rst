==========
RabbitMQ
==========

개요
-----

RabbitMQ는 오픈 소스 메시지 브로커 소프트웨어(메시지 지향 미들웨어)로서, AMQP를 구현하였으며 플러그인
으로 MQTT 등의 프로토콜도 지원한다.

메시지를 생산하는 생산자(Producer)가 메시지를 큐에 저장해 두면, 메시지를 수신하는 소비자(Consumer)
가 메시지를 가져와 처리하는 발행-구독 모델의 메시지 브로커이다.

	.. code-block::

	Q. 발행-구독 모델이 뭔가요?
		- 발행-구독 모델은 비동기 메시지 모델로, 생산자가 메시지를 보내면 소비자는 구독한 특정 범주
		안에서 생산자의 메시지를 받게된다.
		- 전통적인 클라이언트-서버 모델과는 다르게 생산자와 소비자는 분리되어 있으며, 메시지 브로커라는
		제 3의 구성 요소가 생산자와 소비자 사이의 통신을 처리한다.
		- 생산자와 소비자는 다음과 같이 분리되어 있다.
			- 공간 분리: 생산자와 소비자는 서로의 네트워크를 알지못하며 그 정보를 교환하지 않는다.
			- 시간 분리: 생산자와 소비자는 동시에 실행되거나 네트워크로 연결되지 않는다.
			- 동기화 분리: 소비자는 생산자의 메시지를 기다리지 않아도 된다.
		- 메시지 브로커는 생산자로부터 수신되는 메시지를 필터링하여 소비자에게 직접 배포하며, 미들웨어
		형식으로 존재한다.


AMQP
-----

AMQP(Advanced Message Queue Protocol)는 메시지 지향 미들웨어를 구현하기 위한 개방형 표준 응용
 계층 프로토콜이다.

AMQP 이전의 MQ 소프트웨어들은 플랫폼 종속적이였으며, 서로 다른 이들이 중간에 메시지 포맷을 변경하거나 
시스템을 통일시켜야 하는 불편함이 존재했다. AMQP는 네트워크로 전송되는 명령어를 표준화하고 MQ 소프트웨어를 구현하기 위해  메시지 브로커에 대한 기준을
세웠다.

AMQP에서 정의한 기능은 메시지 지향, 큐잉, 라우팅(P2P 및 발행-구독), 신뢰성, 보안이 있다.


RabbitMQ(AMQP)의 구조
----------------



MQTT
-----

MQTT(Message Queuing Telemetry Transport)는 ISO 표준 발행-구독 기반의 메시징 프로토콜이다.
IoT 등 리소스 제약이 있거나, 네트워크 대역폭이 제한되는 환경을 위해 설계되었다. TCP/IP 프로토콜 위에서
동작한다.


    Q. 메세지란 무엇인가요?

.. code-block::

    Q. 소켓과 포트의 차이점은 무엇인가요?
    
    노드(Node) : 네트워크에 연결된 모든 종류의 장치를 일컫는 용어. 노드 중 네트워크 주소(IP 주소)가 할당된 장치를 호스트(Host)라고 부른다.
    
    데이터는 프로세스 레벨에서 주고받는다. 즉, 호스트 간 데이터 전송이 이루어지기 위해선 각 호스트의 프로세스에 데이터가 전달되어야 한다. 이러한 전달의 역할을 포트(Port)가 수행한다. 호스트의 프로세스는 내부적으로 포트를 할당받는다. 편지봉투에 적힌 주소로 비유해도 될 것 같다.
    
    포트 : 네트워크 상에서 데이터를 주고받는 소켓을 식별하기 위해, 각 호스트의 프로세스가 할당받는 고유한 값.
    
    소켓 : 프로세스가 네트워크를 통해 데이터를 주고받기 위해선 반드시 열어야 하는 창구.
    
    각 호스트의 프로세스가 데이터를 주고받기 위해선, 각 호스트 모두 소켓을 열어야 한다.
    소켓을 열기 위해선 호스트에 할당된 IP 주소, 포트 넘버, 프로토콜 등이 필요하며, 이 세 가지가 소켓을 정의한다.
    소켓과 포트는 모두 네트워크 연결을 바탕으로 한다. 호스트 내부의 서비스 또한 루프백 주소를 기반으로 소켓 연결을 진행한다. (혹은 유닉스 유니크 파이프를 사용하거나…)
    재미있게도, 하나의 프로세스는 하나의 포트에 여러 개의 소켓을 가질 수 있다. 소켓을 정의하는 것과 소켓을 식별하는 것은 구분되어야 한다.

참고자료

---------
- `Wikipedia - RabbitMQ <https://ko.wikipedia.org/wiki/RabbitMQ>`_
- `Wikipedia - AMQP <https://ko.wikipedia.org/wiki/AMQP>`_
- `velog - 메시지 큐와 프로토콜 <https://velog.io/@jun17114/%EB%A9%94%EC%8B%9C%EC%A7%80-%ED%81%90%EC%99%80-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C>`_
- `tistory - AMQP <https://kaizen8501.tistory.com/217>`_
- `tistory - AMQP RabbitMQ <https://hyunalee.tistory.com/39#footnote_link_39_2>`_
- `AWS - MQTT <https://aws.amazon.com/ko/what-is/mqtt/>`_
- `Wikipedia - MQTT <https://ko.wikipedia.org/wiki/MQTT>`_
- `joinc - MQTT <https://www.joinc.co.kr/w/man/12/MQTT/Tutorial>`_
- `소켓과 포트 뜻과 차이 <https://blog.naver.com/ding-dong/221389847130>`_
